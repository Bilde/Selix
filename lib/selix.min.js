// selix - github.com/bilde - MIT License
!function(){var a,b,c,d,e,f,g;d=function(a,b){return b-(a.value.slice(0,b).split("\r\n").length-1)},a=function(a){var b,c,d,e;return"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd?{start:a.selectionStart,end:a.selectionEnd}:document.selection&&document.selection.createRange&&a.createTextRange?(b=a.createTextRange(),b.moveToBookmark(document.selection.createRange().getBookmark()),d=a.createTextRange(),d.collapse(!1),b.compareEndPoints("StartToEnd",d)>=0?e=c=a.value.length:(e=-b.moveStart("character",-a.value.length),c=b.compareEndPoints("EndToEnd",d)>=0?a.value.length:-b.moveEnd("character",-a.value.length)),{start:e,end:c}):void 0},e=function(a,b,c){var e;return null==c&&(c=b),"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd?(a.selectionStart=b,a.selectionEnd=c):document.selection&&document.selection.createRange&&a.createTextRange?(e=a.createTextRange(),e.collapse(!0),e.moveEnd("character",d(a,c)),e.moveStart("character",d(a,b)),e.select()):void 0},b=function(b){var c;return c=a(b),b.value.slice(c.start,c.end)},f=function(b,c){var d;return d=a(b),b.value=b.value.slice(0,d.start)+c+b.value.slice(d.end)},g=function(c,d,g){var h,i,j;return h=a(c),j=b(c),f(c,d+j+g),i=h.start+d.length,e(c,i,i+j.length)},c="undefined"!=typeof exports?exports:window,c.selix={getCaret:a,setCaret:e,getText:b,setText:f,wrap:g}}.call(this);